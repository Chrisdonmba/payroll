<!DOCTYPE html>
<html lang="en">

<%- include('../snippets/headers.ejs') %>

    <body>
        <div class="dash_Box">
            <i class="fa-solid fa-list toggle_btn text-white p-3 h3 shadow"></i>

            <!-- side menu -->
            <%- include('../snippets/sidebar.ejs') %>

                <!-- main section -->
                <section class="main p-3 p-md-4">
                    <main>
                        <div class="mini_profile rounded p-3">
                            <header class="head_nav d-md-flex justify-content-between align-items-center">
                                <a href="javascript:void(0)" class="text-decoration-none text-dark text-white">/
                                    Profile</a>
                                <!-- <div class="d-flex align-items-center gap-3">
                                    <input type="search" name="search" id="dearch" placeholder="Search..."
                                        class="form-control" />
                                    <a href="./dash-profile.html" class="text-decoration-none text-dark"><i
                                            class="fa-solid fa-user text-white"></i></a>
                                </div> -->
                            </header>
                            <% if (context.admin) { %>
                            <div class="mini_info">
                                <div class="figure">
                                    <div class="image "><img src="./dist/images/many.jpg" alt="" class="rounded"></div>
                                    <span>
                                        <p class="h5"><%= context.admin.fName %></h2></p>
                                        <p>Admin</p>
                                    </span>
                                </div>
                                <p class="d-flex align-items-center gap-2"><i
                                        class="fa-solid fa-envelope"></i><%= context.admin.email %></h2></p>
                            </div>
                            <% } %>
                        </div>

                        <div class="update_section d-lg-flex w-100 justify-content-between gap-3  ">
                            <!-- update profile -->
                            <div class="profile_update w-100 bg-white p-3 rounded shadow">
                                <% if (context.admin) { %>
                                <form id="editForm">
                                    <section>
                                        <h4>Update Profile</h4>
                                    </section>
                                    <div class="form-group d-flex gap-2 justify-content-between mt-3">
                                        <input type="text" name="fName" placeholder="Full name"
                                            class="form-control" value="<%= context.admin.fName %>" />
                                        <input type="email" name="email" placeholder="Your email"
                                            class="form-control" value="<%= context.admin.email %>" />
                                    </div>
                                    <input type="hidden" name="admin_id" value="<%= context.admin._id %>"
                                                    class="form-control">
                                    <div class="form-group mt-3">
                                        <input type="number" name="phone" placeholder="Phone number" class="form-control" value="<%= context.admin.phone %>"/>
                                    </div>
                                    <div class="fNameErr error"></div>
                                    <div class="emailErr error"></div>
                                    <div class="phoneErr error"></div>
                                    <div class="form-group w-100 mt-3 d-flex justify-content-end">
                                        <button type="submit" class="btn log_btn text-white btn_sizer">Update</button>
                                    </div>
                                </form>
                                <% } %>
                            </div>

                            <!-- update password -->
                            <div class="password_update w-100 bg-white p-3 rounded shadow mt-4 mt-lg-0">
                                <form id="change_password">
                                    <section>
                                        <h4>Change Password</h4>
                                    </section>
                                    <div class="form-group mt-3">
                                        <input type="password" name="old_password" placeholder="Old Pssword"
                                            class="form-control" />
                                            <div class="old_passwordErr error"></div>
                                        <input type="password" name="newPassword" placeholder="New Password"
                                            class="form-control mt-3" />
                                            <div class="newpasswordErr error"></div>
                                    </div>
                                    <div class="form-group">
                                        <input type="password" name="password2" placeholder="confirm password"
                                            class="form-control mt-3" />
                                            <div class="password2Err error"></div>
                                    </div>
                                    <div class="form-group w-100 mt-3 d-flex justify-content-end">
                                        <button type="submit" class="btn log_btn text-white btn_sizer">Save</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </main>
                </section>
        </div>

        <%- include('../snippets/toast.ejs') %>
        <%- include('../snippets/script.ejs') %>
        <script src="/formHandler/editProfile.js"></script>
        <script src="/formHandler/changePwd.js"></script>

        <script>
            new DataTable("#example", {
                scrollX: true,
            });
        </script>
    </body>

</html>